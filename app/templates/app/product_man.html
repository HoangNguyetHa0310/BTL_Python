{% load static %}


{% include "base/header.html" %}
<link rel="stylesheet" type="text/css" href="{%static 'app/css/product.css' %}"/>

{% include "base/nav.html" %}


<div class="K5">
    <div class="K51">
        <h1>SẢN PHẨM BÁN CHẠY NHẤT CHO NAM</h1>
        <p>Các kiểu dáng phổ biến nhất của chúng tôi cho nam trong mùa này.
        </p>
        <div class="K52">
            <button><a href="" onclick="return false">TẤT CẢ CÁC KIỂU DÁNG CHO NAM</a></button>
            <button><a href="" onclick="return false">SẢN PHẨM MỚI NHẤT CHO NAM</a></button>
        </div>
    </div>
</div>

<div class="K6">
    <button><a href="{% url 'index' %}">TRANG CHỦ</a></button>
    <button><a href="./bestsellers.html">SẢN PHẨM BÁN CHẠY NHẤT CHO NAM</a></button>
</div>
<div class="K7">
<div class="K71">
<div class="K72">
    <div class="K721">
        <select id="KS1" name="sort"> 
            <option value="">Sắp Xếp Theo:</option>
            <option value="ascending" {% if sort_by == 'ascending' %}selected{% endif %}>A-Z</option>
            <option value="descending" {% if sort_by == 'descending' %}selected{% endif %}>Z-A</option>
        </select>
    </div>

    <div class="filter-options">
        <div>
            Chọn Kích Thước
            <select id="size-filter" name="size">
                <option value="">Chọn size</option>
                {% for size in sizes %}
                    <option value="{{ size.id }}" {% if selected_size == size.id %}selected{% endif %}>{{ size.name }}</option>
                {% endfor %}
            </select>
        </div>

        <div>
            Chọn Phạm Vi Giá
            <select id="price-filter" name="price">
                <option value="">Mức giá</option>
                {% for price in prices %}
                    <option value="{{ price }}" {% if selected_price == price %}selected{% endif %}>${{ price|floatformat }}</option>
                {% endfor %}
            </select>
        </div>

        <div>
            Chọn Màu Sắc
            <select id="color-filter" name="color">
                <option value="">Màu</option>
                {% for color in colors %}
                    <option value="{{ color.id }}" {% if selected_color == color.id %}selected{% endif %}>{{ color.name }}</option>
                {% endfor %}
            </select>
        </div>

        <div>
            Chọn Nhãn Hiệu
            <select id="brand-filter" name="brand">
                <option value="">Nhãn hiệu</option>
                {% for brand in brands %}
                    <option value="{{ brand.id }}" {% if selected_brand == brand.id %}selected{% endif %}>{{ brand.name }}</option>
                {% endfor %}
            </select>
        </div>
    </div>
</div>
</div>


    <div id="K722">
        {% if products %}
            {% for product in products %}
                <a href="{% url 'detail_product1' product.id %}" class="product-card">
                    <img src="{{ product.image.url }}" alt="Product Image" class="product-image"> 
                    <h2>{{ product.name }}</h2>
                    <p class="price" style="font-size: 24px;">
                        <strike class="original-price" style="font-size: 18px; opacity: 0.6;">150.00 VND</strike>
                        <b>${{ product.price|floatformat }} VND</b> 
                    </p>
                </a>
            {% endfor %}
        {% else %}
            <h2 >HẾT HÀNG VUI LÒNG CHỌN LẠI GIÚP SHOP<br>XIN CẢM ƠN.</h2>
        {% endif %}
    </div>
</div>


<script>
    // Xử lý thay đổi bộ lọc và sắp xếp
    const filterOptions = document.querySelector('.filter-options');
    const sortSelect = document.getElementById('KS1');
    const sizeFilter = document.getElementById('size-filter');
    const priceFilter = document.getElementById('price-filter');
    const colorFilter = document.getElementById('color-filter');
    const brandFilter = document.getElementById('brand-filter');

    filterOptions.addEventListener('change', function() {
        // Lấy giá trị của các bộ lọc
        const size = sizeFilter.value;
        const price = priceFilter.value;
        const color = colorFilter.value;
        const brand = brandFilter.value;
        const sort = sortSelect.value;

        // Tạo URL mới với các giá trị bộ lọc
        const newUrl = `?size=${size}&price=${price}&color=${color}&brand=${brand}&sort=${sort}`;

        // Chuyển hướng đến URL mới
        window.location.href = newUrl;
    });

    sortSelect.addEventListener('change', function() {
        // Lấy giá trị của sắp xếp
        const sort = sortSelect.value;

        // Tạo URL mới với giá trị sắp xếp
        const newUrl = `?size=${selected_size}&price=${selected_price}&color=${selected_color}&brand=${selected_brand}&sort=${sort}`;

        // Chuyển hướng đến URL mới
        window.location.href = newUrl;
    });
</script>
    {% include "base/footer.html" %}

